<form name="cardForm" method="get" action="/card/cardReg">
    在留Y格：
    <select id="ziGe" onchange="onZiGeChange(this.value)" >
        <option value="1">留学</option>
        <option value="2">就</option>
        <option value="3">永住者</option>
    </select>
    S可期间：
    <select id="shiJian" onchange="onZiGeChangeAndShiJianChange(this.value)">
        <option value="1" >1年</option>
    </select>
    <br />
    在留番号：
    <input id="cardNo" type="text" value="请输入在留号码" onchange="onCardNoChange(this.value)"/>
    <br />
    志望C：
    <input type="checkbox" name="zhiYuan" checked onchange="onCheckBoxChange()"/>留学する
    <input type="checkbox" name="zhiYuan" onchange="onCheckBoxChange()" />仕事する
    <input type="checkbox" name="zhiYuan" onchange="onCheckBoxChange()" />研修する
    <br />
    <input style="margin-left:90px" type="checkbox" name="zhiYuan" onchange="onCheckBoxChange()" />旅行する
    <input type="checkbox" name="zhiYuan" onchange="onCheckBoxChange()" />投资贸易
    <input type="checkbox" name="zhiYuan" onchange="onCheckBoxChange()" />外交行政
    <br />
    <input style="margin-left:90px" id="submitButton" type="submit" value="留学登录" onclick="onButtonClick()"/>
</form>

<script>
    function onZiGeChange(value) {
        //③	当「在留Y格」控件选中「留学」时
        if (value == "1") {
            var shiJian = document.getElementById("shiJian");
            shiJian.innerHTML = '<option value="1">1年</option><option value="2">3年</option><option value="3">4年</option>';
            shiJian.disabled = false;
            //最下方按钮控件显示文字设置为「留学登录」
            document.getElementById("submitButton").value = "留学登录";

        }
        //④	当「在留Y格」控件选中「就骸故
        if (value == "2") {
            var shiJian = document.getElementById("shiJian");
            shiJian.innerHTML = '<option value="1">1年</option><option value="2" selected>3年</option>';
            shiJian.disabled = false;
            //控件选中「就骸故保最下方按钮控件显示文字设置为「登录」。
            document.getElementById("submitButton").value = "登录";
        }
        //	⑤	当「在留Y格」控件选中「永住者」时
        if (value == "3") {
            var shiJian = document.getElementById("shiJian");
            shiJian.innerHTML = '<option value="-1">-</option>';
            shiJian.disabled = true;
            //控件选中「永住者」时，最下方按钮控件显示文字设置为「登录」。
            document.getElementById("submitButton").value = "登录";
        }
    }
    function onZiGeChangeAndShiJianChange(ShiJianvalue) {
        //「在留Y格」控件选中「留学」
        if(document.getElementById("ziGe").value =="1"){
            //且「许可期间」控件选中「3年」或「4年」时 
            if(ShiJianvalue =="2" || ShiJianvalue =="3"){
                var zhiYuanArray=document.getElementsByName("zhiYuan");
                for(var i = 0;i<zhiYuanArray.length;i++){
                    if(i<=1){
                        zhiYuanArray[i].checked=true;
                    }else{
                        zhiYuanArray[i].checked=false;
                    }
                }
            }

        }
        //「在留Y格」控件选中「就骸
        if (document.getElementById("ziGe").value == "2") {
            //且「许可期间」控件选中[1年]时 
            if (ShiJianvalue == "1" ) {
                var zhiYuanArray = document.getElementsByName("zhiYuan");
                for (var i = 0; i < zhiYuanArray.length; i++) {
                    if (i == 1) {
                        zhiYuanArray[i].checked = true;
                    } else {
                        zhiYuanArray[i].checked = false;
                    }
                }
            }
        }
    }
    //⑩	当「在留番号」控件值发生改变时
    function onCardNoChange(value) {
        while (value.indexOf(" ")!=-1) {
            value = value.replace(" ","");
        }
        document.getElementById("cardNo").value = value;
        var flag = true;
        //检测长度是否为12、
        if (value.length == 12) {
            //且以字母H开头
            if (value.substr(0, 1) == "H") {
                //数字结尾
                if (parseFloat(value.substr(value.length - 1, 1)).toString() != "NaN") {
                    flag = false;
                }
            }
        }
        if (flag) {
            alert('在留番号格式不对');
        }
    }
    function onCheckBoxChange() {
        var arr = document.getElementsByName("zhiYuan");
        var flag = true;
        //判断是否全部取消选中
        for (var i = 0; i < arr.length;i++){
            if(arr[i].checked){
                flag = false;
                break;
            }
        }
        //自动触发下方登录按钮的点击事件。
        if (flag) {
            document.getElementById("submitButton").click();
        }
    }
    function onButtonClick() {
        var arr = document.getElementsByName("zhiYuan");
        var flag = 0;
        //判断选中几次
        for (var i = 0; i < arr.length; i++) {
            if (arr[i].checked) {
                flag = flag + 1;
            }
        }
        //2项及以下时
        if (flag <= 2) {
            //这是一行测试代码
            document.getElementById("submitButton").type = "button";
            window.location.href = "http://www.google.com";
        } else {
            var str = "";
            for (var i = 0; i < arr.length; i++) {
                if (arr[i].checked) {
                    str = str + arr[i].nextSibling.nodeValue.trim();
                    str = str + "+";
                }
            }
            if (str.substr(str.length-1,1) =="+") {
                alert(str.substr(0, str.length - 1));
            } else {
                alert(str);
            }
        }
    }
</script>